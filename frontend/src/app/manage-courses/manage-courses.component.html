<div style="padding: 2%;">
    <h2>Manage Courses</h2>
    <mat-card>
        <mat-tab-group style="height: 100%;">
            <mat-tab label="Create">
                <form #f="ngForm" (ngSubmit)="create(f)" [formGroup]="createCourse" style="margin-top: 3rem;">
                    <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                        <mat-label>Course Name</mat-label>
                        <input matInput name="name" formControlName="name" required />
                    </mat-form-field>
                    <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                        <mat-label>Course Code</mat-label>
                        <input matInput name="code" formControlName="code" required />
                    </mat-form-field>
                    <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                        <mat-label>No. of Years</mat-label>
                        <input matInput name="duration" formControlName="duration" required type="number" />
                    </mat-form-field>
                    <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                        <mat-label>No. of Semesters</mat-label>
                        <input matInput name="semesters" formControlName="semesters" required type="number" />
                    </mat-form-field>
                    <button  mat-raised-button
                    color="primary"
                    type="submit"
                    style="width: 30%; margin-left: 35%;"                    
                    >Add Course</button>
                </form>
            </mat-tab>


            <mat-tab label="Manage Branches">
                <form #f="ngForm"  [formGroup]="courseForm2" >
                    <mat-form-field appearance="outline" [style.width.%]=100 [style.padding.%]=1>
                        <mat-label>Course</mat-label>
                        <mat-select name="course" formControlName="course"  (selectionChange)="branchform()">
                            <mat-option *ngFor="let course of courses" [value]="course" >
                              {{ course }}
                            </mat-option>
                          </mat-select>
                    </mat-form-field>
                </form>
                <div *ngIf="isbranch">
                    <hr>
                    <h3>Add New Branches</h3>
                    <mat-form-field class="example-chip-list">
                        <mat-chip-list #chipList aria-label="Branch Selection">
                          <mat-chip *ngFor="let fruit of new_branches" [selectable]="selectable"
                                   [removable]="removable" (removed)="remove(fruit)">
                            {{fruit.branch_name}}
                            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                          </mat-chip>
                          <input placeholder="New Branch..."
                                 [matChipInputFor]="chipList"
                                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                 [matChipInputAddOnBlur]="addOnBlur"
                                 (matChipInputTokenEnd)="add($event)">
                        </mat-chip-list>
                      </mat-form-field>
                      <button  mat-raised-button
                      color="primary"
                      type="btn"
                      style="width: 20%; height: 36px;"
                      (click)="addBranches()"
                      >Add Branches</button>
                    <hr>
                    <h3>Available Branches</h3>
                    <div class="alert alert-warning" role="alert">Deleting a branch will also delete all subjects related to that branch!</div>
                    <div class="row" style="margin: 0px; max-height: 124px;">
                        <table style="width: 50%;">
                            <tr style="border-bottom: solid 1px black;">
                                <td style="width: 75%; font-weight: 500;">Branch</td><td style="width: 25%; text-align: center; font-weight: 500;">Actions</td>
                            </tr>
                            <tr *ngFor="let i of branches">
                                <td style="width: 75%;">{{i}}</td>
                                <td style="text-align: center; width: 25%;"><a style="color: brown;" (click)="deletebranch(i)">Delete</a></td>
                            </tr>
                        </table>
                    </div>

                </div>
            </mat-tab>


            <mat-tab label="Update/Delete">
                <div *ngIf="iscourses">
                    <form #f="ngForm" (ngSubmit)="delete(f)" [formGroup]="courseForm" >
                        <mat-form-field appearance="outline" [style.width.%]=70 [style.padding.%]=3>
                            <mat-label>Course</mat-label>
                            <mat-select name="course" formControlName="course"  (selectionChange)="updateform()">
                                <mat-option *ngFor="let course of courses" [value]="course" >
                                  {{ course }}
                                </mat-option>
                              </mat-select>
                        </mat-form-field>
                        <button  mat-raised-button
                        color="warn"
                        type="submit"
                        style="width: 25%; height: 45px; text-overflow: ellipsis; padding: 6px;"
                        >Delete Course</button>
                    </form>
                    <div *ngIf="isupdate">
                        <hr>
                        <h3>Update Course</h3>
                        <form #f="ngForm" (ngSubmit)="update(f)" [formGroup]="updateCourse" >
                            <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                                <mat-label>Course Name</mat-label>
                                <input matInput name="name" formControlName="name" required />
                            </mat-form-field>
                            <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                                <mat-label>Course Code</mat-label>
                                <input matInput name="code" formControlName="code" required />
                            </mat-form-field>
                            <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                                <mat-label>No. of Years</mat-label>
                                <input matInput name="duration" formControlName="duration" required type="number" />
                            </mat-form-field>
                            <mat-form-field appearance="outline" [style.width.%]=50 [style.padding.%]=1>
                                <mat-label>No. of Semesters</mat-label>
                                <input matInput name="semesters" formControlName="semesters" required type="number" />
                            </mat-form-field>
                            <button  mat-raised-button
                            color="primary"
                            type="submit"
                            style="width: 30%; margin-left: 35%;"                    
                            >Update Course</button>
                        </form>
                    </div>
                </div>

            </mat-tab>
        </mat-tab-group>
    </mat-card>
</div>